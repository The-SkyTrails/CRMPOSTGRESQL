{% extends "Admin/Base/base.html" %}
{% load static %}
{% load custom_filters %}
{% block main-content %}


 <div class="form-container">

    <div class="custom-container">
      <div class="icon-container">
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none">
            <path
              d="M18.0991 9.91073L16.4304 8.24404L10.5899 2.41065C10.4334 2.25442 10.2213 2.16666 10 2.16666C9.77878 2.16666 9.5666 2.25442 9.41013 2.41065L3.56962 8.24404L1.9009 9.91073C1.74892 10.0679 1.66482 10.2784 1.66672 10.4969C1.66862 10.7154 1.75637 10.9244 1.91107 11.0789C2.06576 11.2334 2.27503 11.3211 2.4938 11.323C2.71256 11.3249 2.92332 11.2409 3.08068 11.0891L3.32515 10.8449V17.1666C3.32515 17.6087 3.50096 18.0326 3.81391 18.3452C4.12685 18.6577 4.5513 18.8333 4.99387 18.8333H7.49695C7.71823 18.8333 7.93045 18.7455 8.08693 18.5892C8.2434 18.433 8.3313 18.221 8.3313 18V14.6666C8.3313 14.4456 8.41921 14.2336 8.57568 14.0774C8.73215 13.9211 8.94438 13.8333 9.16566 13.8333H10.8344C11.0557 13.8333 11.2679 13.9211 11.4244 14.0774C11.5808 14.2336 11.6687 14.4456 11.6687 14.6666V18C11.6687 18.221 11.7566 18.433 11.9131 18.5892C12.0696 18.7455 12.2818 18.8333 12.5031 18.8333H15.0062C15.4487 18.8333 15.8732 18.6577 16.1861 18.3452C16.4991 18.0326 16.6749 17.6087 16.6749 17.1666V10.8449L16.9194 11.0891C17.0767 11.2409 17.2875 11.3249 17.5062 11.323C17.725 11.3211 17.9343 11.2334 18.089 11.0789C18.2437 10.9244 18.3314 10.7154 18.3333 10.4969C18.3352 10.2784 18.2511 10.0679 18.0991 9.91073Z"
              fill="#374151" />
          </svg>
        </div>
      </div>
      <div class="text-container">
        <a href="{% url "admin_dashboard" %}" style="text-decoration: none">
          <div class="text">Dashboard</div>
        </a>
      </div>
      <div class="icon-container">
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none">
            <path
              d="M7.78916 16.3333C7.56988 16.3333 7.35554 16.2649 7.17323 16.1369C6.99092 16.0088 6.84882 15.8269 6.76491 15.614C6.68101 15.4011 6.65905 15.1668 6.70181 14.9408C6.74458 14.7148 6.85015 14.5072 7.00519 14.3443L10.6567 10.5071L7.00519 6.67003C6.89928 6.56254 6.8148 6.43396 6.75668 6.2918C6.69857 6.14964 6.66798 5.99674 6.6667 5.84202C6.66542 5.6873 6.69348 5.53386 6.74923 5.39066C6.80499 5.24745 6.88732 5.11735 6.99144 5.00795C7.09556 4.89854 7.21936 4.81202 7.35564 4.75343C7.49192 4.69484 7.63794 4.66536 7.78517 4.6667C7.93241 4.66804 8.07792 4.70019 8.2132 4.76126C8.34849 4.82233 8.47085 4.9111 8.57314 5.02239L13.0087 9.68333C13.2165 9.90184 13.3333 10.1982 13.3333 10.5071C13.3333 10.8161 13.2165 11.1125 13.0087 11.331L8.57314 15.9919C8.36523 16.2104 8.08323 16.3333 7.78916 16.3333Z"
              fill="#9CA3AF" />
          </svg>
        </div>
      </div>
      <a href="{% url "Package_list" %}">
        <div class="text-container">
        <div class="text">Products</div>
      </div>
      </a>
      <div class="icon-container">
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none">
            <path
              d="M7.78916 16.3333C7.56988 16.3333 7.35554 16.2649 7.17323 16.1369C6.99092 16.0088 6.84882 15.8269 6.76491 15.614C6.68101 15.4011 6.65905 15.1668 6.70181 14.9408C6.74458 14.7148 6.85015 14.5072 7.00519 14.3443L10.6567 10.5071L7.00519 6.67003C6.89928 6.56254 6.8148 6.43396 6.75668 6.2918C6.69857 6.14964 6.66798 5.99674 6.6667 5.84202C6.66542 5.6873 6.69348 5.53386 6.74923 5.39066C6.80499 5.24745 6.88732 5.11735 6.99144 5.00795C7.09556 4.89854 7.21936 4.81202 7.35564 4.75343C7.49192 4.69484 7.63794 4.66536 7.78517 4.6667C7.93241 4.66804 8.07792 4.70019 8.2132 4.76126C8.34849 4.82233 8.47085 4.9111 8.57314 5.02239L13.0087 9.68333C13.2165 9.90184 13.3333 10.1982 13.3333 10.5071C13.3333 10.8161 13.2165 11.1125 13.0087 11.331L8.57314 15.9919C8.36523 16.2104 8.08323 16.3333 7.78916 16.3333Z"
              fill="#9CA3AF" />
          </svg>
        </div>
      </div>
      <div class="text-container">
        <div class="text">Product Details</div>
      </div>
    </div>
    

    <div class="customs-container">
      <div class="custom-box">
        <div class="custom-text">Product Details</div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        {% if package.image %}
           <img src="{{ package.image.url }}" class="img-fluid imges" alt="Product Image" style="padding: 5%;" />
          {% else %}
           <img src="{% static 'assets/images/noimage.png' %}" class="img-fluid imges" alt="Product Image" style="padding: 12%;" />
          {% endif %}
      </div>
      <div class="col-md-6" style="background-color: beige;padding:3%;">
        <div class="div" style="display: flex;justify-content:space-between;">
          <h5 class="card-title1"> {{package.title}}</h5>
          <div style="display: flex;justify-content:space-between;">
            <form action="{% url "package_apply" package.id %}" method="POST">
              {% csrf_token %}
              
              <!-- <div class="Button">
                <div class="Text"><button class="btn border-0 Text">Apply Now</button></div> -->
                
                <div class="ArrowRight">
                  <button class="border-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-right-circle" viewBox="0 0 16 16" style="color: #0d6efd;">
                      <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/>
                    </svg>
                  </button>
                  
                </div>
              <!-- </div>  -->
              </form>
              
                <a href="{% url "pac_pdf" package.id  %}" download>

                     <div class="ArrowRight">
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-file-earmark-arrow-down" viewBox="0 0 16 16">
                        <path d="M8.5 6.5a.5.5 0 0 0-1 0v3.793L6.354 9.146a.5.5 0 1 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
                        <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"/>
                      </svg>
                     </div>
                 </a>


                <a href="#" id="shareButton" data-id="{{ package.id }}">

                     <div class="ArrowRight">
                      <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" fill="currentColor" class="bi bi-share" viewBox="0 0 16 16">
                        <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5m-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"/>
                      </svg>
                     </div>
                 </a>

          </div>
          
        </div>
        
        <p class="card-textt">Country:<span class="sp">{{package.visa_country}}</span></p>
              <p class="card-textt">Category-SubCategory: <span class="sp">{{package.visa_category}}</span></p>
              <p class="card-textt">No. Of Visa : <span class="sp">{{package.number_of_visa}}</span></p>
              <p class="card-textt">Expiry Date:<span class="sp">{{package.package_expiry_date}}</span> </p>
              <p class="card-textt">Processing Time:<span class="sp"> {{package.processing_time}}</span></p>
              <p class="card-textt">Product Code : <span class="sp"> {{package.amount}}</span></p>
              <p class="card-textt">Advanced Product Code:<span class="sp"> {{package.advance_amount}}</span> </p>
              <p class="card-textt">File Charges:<span class="sp"> {{package.file_charges}}</span></p>
              <h5 class="card-textt">Description:</h5>
              <p class="card-textt"><span class="sp"> {{package.description}}</span></p>
              <p class="card-textt">Product PDF:<span class="sp">{% if package.product_pdf %}<a href="{{package.product_pdf.url}}" target="_blank">{{package.product_pdf.url|filename}}</a>{% else %}nofile{% endif %}</span></p>
              
      </div>
    </div>

    
  </div>


<script>
    document.getElementById('shareButton').addEventListener('click', async () => {
        const shareButton = document.getElementById('shareButton');
        const dynamicId = shareButton.getAttribute('data-id');
        console.log("data iddd",dynamicId)
        const shareUrl = `https://crm.theskytrails.com/packages/share/${dynamicId}/`;
        if (navigator.share) {  // Check if the Web Share API is supported
            try {
                await navigator.share({
                    title: 'Check out this product!',
                    text: 'I found this amazing product. Have a look!',
                    url: shareUrl,
                });
                console.log('Successfully shared');
            } catch (error) {
                console.error('Error sharing:', error);
            }
        } else {
            alert('Sharing not supported on this browser. Please copy the link manually.');
        }
    });
</script>  


{% endblock main-content %}